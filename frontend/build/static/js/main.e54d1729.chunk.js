(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},127:function(e,t){},129:function(e,t){},158:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(34),c=n.n(i),o=(n(105),n(106),n(47)),s=n(6),p=n(37),u=n(181),l=n(176),j=n(177),d=n(178),b=n(175),m=Object(b.a)((function(e){return{root:{height:"64px"}}})),g=n(2);function f(e){var t=m();return Object(g.jsx)(l.a,{className:t.root,position:"fixed",children:Object(g.jsx)(j.a,{variant:"dense",className:t.toolbar,children:Object(g.jsx)(d.a,{variant:"h6",color:"inherit",children:"VIDEO CALLING APP"})})})}function h(e){return Object(g.jsxs)(a.a.Fragment,{children:[Object(g.jsx)(f,{}),Object(g.jsx)(u.a,{height:"64px"}),Object(g.jsx)(u.a,{children:e.children})]})}var O="https://group-video-calling.herokuapp.com/",x=("".concat(O,"/api"),"/"),v="/room",y="/dashboard",C=n(162),I=n(179),D=n(96),P=n(29),B=n(59),F=n.n(B),N=n(92),k=Object(r.createContext)(),w=Object(N.io)(O),R=function(e){var t=e.roomId,n=e.user,a=e.children,i=Object(r.useState)([]),c=Object(P.a)(i,2),o=c[0],s=c[1],p=Object(r.useRef)(null),u=Object(r.useRef)(null),l=Object(r.useRef)([]),j=Object(r.useState)(t),d=Object(P.a)(j,2),b=d[0],m=d[1],f=Object(r.useState)(n),h=Object(P.a)(f,2),O=h[0],x=h[1];Object(r.useEffect)((function(){p.current=w,navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){u.current.srcObject=e,b&&p.current.emit("join room",{roomID:b,user:O}),p.current.on("all users",(function(t){var n=[];t.forEach((function(t){var r=t.id,a=t.user,i=O,c=v(r,p.current.id,e,i,a);l.current.push({peerID:r,peer:c}),n.push({me:i,opponentUser:a,peer:c})})),s(n)})),p.current.on("user joined",(function(t){var n=y(t.signal,t.callerID,e,t.me,t.opponentUser);l.current.push({peerID:t.callerID,peer:n}),s((function(e){return[].concat(Object(D.a)(e),[{me:t.me,opponentUser:t.opponentUser,peer:n}])}))})),p.current.on("receiving returned signal",(function(e){l.current.find((function(t){return t.peerID===e.id})).peer.signal(e.signal)}))})).catch((function(e){return console.log("===> error while opening media : ",e)}))}),[]);var v=function(e,t,n,r,a){var i=new F.a({initiator:!0,trickle:!1,stream:n});return i.on("signal",(function(n){p.current.emit("sending signal",{userToSignal:e,callerID:t,signal:n,me:r,opponentUser:a})})),i},y=function(e,t,n,r,a){var i=new F.a({initiator:!1,trickle:!1,stream:n});return i.on("signal",(function(e){p.current.emit("returning signal",{signal:e,callerID:t,me:r,opponentUser:a})})),i.signal(e),i};return Object(g.jsx)(k.Provider,{value:{roomID:b,peers:o,setRoomID:m,socketRef:p,peersRef:l,userVideo:u,setUser:x},children:a})},U=Object(b.a)((function(){return{paper:{width:"100%",height:"100%",objectFit:"cover",padding:"10px 5px 0px 5px"},video:{width:"100%",height:"100%",objectFit:"cover"}}})),E=function(){var e=U(),t=Object(r.useContext)(k).userVideo;return Object(g.jsx)(C.a,{className:e.paper1,children:Object(g.jsxs)(I.a,{item:!0,children:[Object(g.jsx)(d.a,{variant:"h5",gutterBottom:!0,children:"YOU"}),Object(g.jsx)("video",{playsInline:!0,muted:!0,ref:t,autoPlay:!0,className:e.video})]})})},S=function(e){var t=e.peer,n=U(),a=Object(r.useRef)();return Object(r.useEffect)((function(){t.peer.on("stream",(function(e){a.current.srcObject=e}))}),[]),Object(g.jsx)(C.a,{className:n.paper,children:Object(g.jsxs)(I.a,{item:!0,children:[Object(g.jsx)(d.a,{variant:"h5",gutterBottom:!0,children:t.opponentUser?t.opponentUser.name:"Guest"}),Object(g.jsx)("video",{playsInline:!0,ref:a,autoPlay:!0,className:n.video})]})})};function L(){return Object(r.useContext)(k).peers.map((function(e){return Object(g.jsx)(S,{peer:e},e.peer.channelName)}))}var T=n(28),A=Object(b.a)((function(e){var t;return{gridContainer1:(t={display:"grid",gridTemplateColumns:"repeat(auto-fill, 30%)",justifyContent:"center",padding:"20px",gridGap:"20px"},Object(T.a)(t,e.breakpoints.down("sm"),{gridTemplateColumns:"repeat(auto-fill, 49%)"}),Object(T.a)(t,e.breakpoints.down("xs"),{gridTemplateColumns:"repeat(auto-fill, 98%)"}),t)}})),G=function(){var e=A(),t=Object(s.i)(),n=Object(s.h)(),r=Object(s.g)(),a=n.state.user;if(!t.id)return r.push(x);var i={user:a,roomId:t.id};return Object(g.jsx)(h,{children:Object(g.jsx)(R,Object(p.a)(Object(p.a)({},i),{},{children:Object(g.jsxs)(I.a,{container:!0,className:e.gridContainer1,children:[Object(g.jsx)(E,{}),Object(g.jsx)(L,{})]})}))})},J=n(183),M=n(182),V=n(94),H=n.n(V),Y=Object(b.a)((function(e){return{gridContainer:Object(T.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirectoin:"column"}),paper:{padding:"10px",margin:"10px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},input:{margin:"0 15px",marginBottom:"12px",padding:"3px 15px",border:"1px solid #ccc",borderRadius:"4px"},callEnd:{background:"red",color:"#fff"}}}));function q(){var e=Y(),t=Object(s.i)().id,n=Object(s.g)(),a=Object(r.useState)(t),i=Object(P.a)(a,2),c=i[0],o=i[1],u=Object(r.useState)({name:"Guest"}),l=Object(P.a)(u,2),j=l[0],b=l[1];return Object(g.jsx)(h,{children:Object(g.jsxs)(I.a,{container:!0,className:e.gridContainer,children:[Object(g.jsx)(I.a,{item:!0,xs:10,sm:3,md:3,lg:3,children:Object(g.jsxs)(C.a,{className:e.paper,children:[Object(g.jsx)(d.a,{variant:"h6",gutterBottom:!0,children:"Account Info"}),Object(g.jsx)(J.a,{placeholder:"Enter name",type:"text",className:e.input,value:j.name,onChange:function(e){b(Object(p.a)(Object(p.a)({},j),{},{name:e.target.value}))}}),Object(g.jsx)(H.a,{text:t,children:Object(g.jsx)(M.a,{variant:"contained",color:"primary",children:"Copy your ID"})})]})}),Object(g.jsx)(I.a,{item:!0,xs:10,sm:3,md:3,lg:3,children:Object(g.jsxs)(C.a,{className:e.paper,children:[Object(g.jsx)(d.a,{variant:"h6",gutterBottom:!0,children:"Join a meeting"}),Object(g.jsx)(J.a,{placeholder:"Enter ID",type:"text",className:e.input,value:c,onChange:function(e){o(e.target.value)}}),Object(g.jsx)(M.a,{variant:"contained",color:"primary",onClick:function(){if(c)return n.push({pathname:"".concat(v,"/").concat(c),state:{user:j}})},children:"JOIN"})]})})]})})}var z=n(159);var K=function(){return Object(g.jsx)(o.a,{children:Object(g.jsxs)(s.d,{children:[Object(g.jsx)(s.a,{exact:!0,path:x,to:"".concat(y,"/").concat(z.v1())}),Object(g.jsx)(s.b,{path:"".concat(v,"/:id"),component:G}),Object(g.jsx)(s.b,{path:"".concat(y,"/:id"),component:q})]})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},W=n(180),X=n(95),Z=Object(X.a)({palette:{primary:{main:"#281AC8",border:"#F0F0F0",tableRowBackgroundHover:"#f9f9f9e8"},secondary:{main:"#FD749B"},error:{main:"#F85D5D",light:"#f85d5dc4"},success:{main:"#1CD1A1",light:"#3fbe63"},text:{primary:"#858585",color:"#494949"},gradient:{right:"linear-gradient(to right, rgba(253, 116, 155, .8), rgba(40, 26, 200, .7))",bottom:"linear-gradient(to bottom, rgba(253, 116, 155, .8), rgba(40, 26, 200, .7))",left:"linear-gradient(to left, rgba(253, 116, 155, .8), rgba(40, 26, 200, .7))",top:"linear-gradient(to top, rgba(253, 116, 155, .8), rgba(40, 26, 200, .7))"}},typography:{fontFamily:"Poppins Medium",body1:{fontFamily:"Poppins"},poppins:"'Poppins', sans-serif",poppinsBold:"'Poppins Bold', sans-serif",poppinsExtraBold:"'Poppins Extra Bold', sans-serif",poppinsLight:"'Poppins Light', sans-serif",poppinsMedium:"'Poppins Medium', sans-serif",poppinsRegular:"'Poppins Regular', sans-serif",poppinsSemiBold:"'Poppins Semi-Bold', sans-serif"},action:{hover:{whiteFilter:"brightness(0) invert(1)"}}});c.a.render(Object(g.jsx)(W.a,{theme:Z,children:Object(g.jsx)(K,{})}),document.getElementById("root")),Q()}},[[158,1,2]]]);
//# sourceMappingURL=main.e54d1729.chunk.js.map